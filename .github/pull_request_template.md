# Pull Request

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

<!-- –ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç PR -->

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ß–µ–∫-–ª–∏—Å—Ç: Firebase Functions Anti-Loop Protection

**‚ö†Ô∏è –ö–∞—Å–∞–µ—Ç—Å—è –ª–∏ —ç—Ç–æ—Ç PR Firebase Cloud Functions?**

- [ ] **–ù–µ—Ç, —ç—Ç–æ—Ç PR –Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è Cloud Functions** _(–º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–µ)_
- [ ] **–î–∞, —ç—Ç–æ—Ç PR –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç/–¥–æ–±–∞–≤–ª—è–µ—Ç Cloud Functions**

---

### üî• –ï—Å–ª–∏ –î–ê - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

#### 1. –¢—Ä–∏–≥–≥–µ—Ä—ã (onCreate, onUpdate, onDelete, onWrite)

**–ö–∞—Å–∞–µ—Ç—Å—è –ª–∏ PR Firestore —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤?**

- [ ] –ù–µ—Ç
- [ ] –î–∞ ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ:**

#### 2. üõ°Ô∏è Idempotency Guards (–¥–ª—è onUpdate/onWrite)

**–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏/–∏–∑–º–µ–Ω–∏–ª–∏ `onUpdate` –∏–ª–∏ `onWrite` —Ç—Ä–∏–≥–≥–µ—Ä:**

- [ ] –Ø –¥–æ–±–∞–≤–∏–ª **Idempotency Guard** –≤ –ù–ê–ß–ê–õ–ï —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] Guard –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `change.before.data()` –∏ `change.after.data()`
- [ ] Guard –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `return null;` –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
- [ ] –§—É–Ω–∫—Ü–∏—è –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ—Ç –∂–µ –¥–æ–∫—É–º–µ–Ω—Ç –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –µ—ë

**–ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ Guard:**
```typescript
const before = change.before.data();
const after = change.after.data();

// Guard: –ï—Å–ª–∏ –ø–æ–ª–µ —É–∂–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å - –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ
if (before.myField !== after.myField || before.count === after.count) {
  return null; // ‚Üê –í–´–•–û–î
}

// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
await change.after.ref.update({ count: increment(1) });
```

#### 3. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –Ø –∑–∞–ø—É—Å—Ç–∏–ª **Firebase Emulators** –ª–æ–∫–∞–ª—å–Ω–æ: `firebase emulators:start`
- [ ] –Ø –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —Ç—Ä–∏–≥–≥–µ—Ä –≤—Ä—É—á–Ω—É—é –≤ —ç–º—É–ª—è—Ç–æ—Ä–∞—Ö
- [ ] –Ø –Ω–∞–ø–∏—Å–∞–ª **–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç (Jest)** –¥–ª—è –º–æ–µ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞
- [ ] –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ Guard —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –Ø –∑–∞–ø—É—Å—Ç–∏–ª `npm test` –∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏

#### 4. üîç Static Analysis

- [ ] –Ø –∑–∞–ø—É—Å—Ç–∏–ª `npm run lint` –∏ –∏—Å–ø—Ä–∞–≤–∏–ª –≤—Å–µ –æ—à–∏–±–∫–∏
- [ ] ESLint –ø—Ä–∞–≤–∏–ª–æ `firebase-no-trigger-loop` –ù–ï –≤—ã–¥–∞–ª–æ –æ—à–∏–±–æ–∫
- [ ] –ï—Å–ª–∏ ESLint –≤—ã–¥–∞–ª warning - —è –ø–æ–Ω–∏–º–∞—é –ø–æ—á–µ–º—É –∏ —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ

#### 5. üìä Code Review Checklist

- [ ] –Ø –ø—Ä–æ–≤–µ—Ä–∏–ª —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–∞–º–∞ —Å–µ–±—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏
- [ ] –Ø –¥–æ–±–∞–≤–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å `console.log` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] –Ø –∑–Ω–∞—é –≥–¥–µ –∏—Å–∫–∞—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è (Firebase Console ‚Üí Functions ‚Üí Logs)
- [ ] –Ø –ø–æ–Ω–∏–º–∞—é —á—Ç–æ –æ—à–∏–±–∫–∞ –∑–¥–µ—Å—å –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å—á–µ—Ç—É **$10,000+**

---

## üí∞ –Ø –ø–æ–Ω–∏–º–∞—é —Ä–∏—Å–∫–∏

- [ ] –Ø –ø—Ä–æ—á–∏—Ç–∞–ª `DEFENSIVE_PROGRAMMING_GUIDE.md`
- [ ] –Ø –ø–æ–Ω–∏–º–∞—é –∫–∞–∫ infinite loop –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏–º —Å—á–µ—Ç–∞–º
- [ ] –Ø –æ–±—è–∑—É—é—Å—å –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø–µ—Ä–≤—ã–µ 48 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã / –í–∏–¥–µ–æ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

<!-- –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã UI –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–ª–∏ –ª–æ–≥–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ Issues

<!-- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç #123 -->

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç PR

<!-- –®–∞–≥–∏ –¥–ª—è reviewer'–∞ —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è -->

1.
2.
3.

---

## ‚ö†Ô∏è –î–ª—è Reviewer

**–ï—Å–ª–∏ —ç—Ç–æ—Ç PR –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç Cloud Functions:**

- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ `onUpdate` —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏–º–µ—é—Ç Idempotency Guards
- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –Ω–æ–≤—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ ESLint –Ω–µ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–æ–∫
- [ ] –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ - –ª—É—á—à–µ —Å–ø—Ä–æ—Å–∏—Ç—å —á–µ–º –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –±–∞–≥!

---

**üî• –ü–æ–º–Ω–∏—Ç–µ: –û–¥–∏–Ω –±–∞–≥ –≤ onUpdate —Ç—Ä–∏–≥–≥–µ—Ä–µ = $174+ —Å—á–µ—Ç –∑–∞ 5 –¥–Ω–µ–π!**
